import{a as y,S as T,i as c}from"./assets/vendor-778245f4.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))g(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&g(d)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function g(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();function w(e,t){return y.get("https://newsapi.org/v2/everything",{params:{apiKey:"31d73c075bf1480facfc72f704139b7b",q:e,searchIn:"content",sortBy:"relevancy",pageSize:15,page:t}})}function p(){return{form:document.querySelector(".js-search-form"),wrapper:document.querySelector(".js-wrapper"),loader:document.querySelector(".js-loader"),newsBtn:document.querySelector(".js-news-btn")}}function f(e){return e.map(t=>`
      <li class="list-item">
        <a class="list-item-link" href="${t.url}">
          <img class="list-item-img" src="${t.urlToImage}" alt="${t.title}" width="360" height="200" loading="lazy"">
          <div>
          <h3 class="list-item-title">${t.title}</h3>
          <p class="list-item-text">${t.description}</p>
          </div>
          <div class="author-block">
            <p class="list-item-author">Author: ${t.source.name}</p>
          </div>
        </a>
      </li>
        `).join("")}const u=p(),E={lines:18,length:13,width:22,radius:0,scale:1,corners:.5,speed:1,rotate:90,animation:"spinner-line-shrink",direction:1,color:"#59cf86",fadeColor:"transparent",top:"48%",left:"48%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"},v=new T(E);function m(){v.spin(u.loader),u.loader.classList.remove("is-hidden")}function l(){v.stop(),u.loader.classList.add("is-hidden")}function I(){c.warning({title:"Warning",message:"Write request",position:"center"})}function b(){c.error({title:"Error",message:"Server error",position:"center"})}function L(e){c.info({title:"Hello",message:`We have found ${e} results`,position:"topRight"})}function M(){c.info({title:"Sorry",message:"It`s all results",position:"topRight"})}function S(){p().newsBtn.classList.add("is-hidden")}function R(e,t){return y.get("https://newsapi.org/v2/top-headlines",{params:{apiKey:"31d73c075bf1480facfc72f704139b7b",q:e,searchIn:"content",sortBy:"relevancy",pageSize:15,page:t,country:"us"}})}const s=p();let a=null,o=1;const $={root:null,rootMargin:"100px",threshold:1},q=function(e,t){e.forEach(i=>{i.isIntersecting&&(t.unobserve(i.target),k())})},h=new IntersectionObserver(q,$);s.form.addEventListener("submit",j);s.newsBtn.addEventListener("click",A);async function j(e){if(e.preventDefault(),S(),a=e.currentTarget.elements.delay.value.trim(),m(),!a)return l(),s.wrapper.innerHTML="",I();try{const t=await w(a);s.wrapper.innerHTML=f(t.data.articles),L(t.data.totalResults),o<t.data.totalResults/15&&h.observe(s.wrapper.lastElementChild)}catch{b()}finally{l()}e.target.reset()}async function k(){o+=1,m();try{const e=await w(a,o);s.wrapper.insertAdjacentHTML("beforeend",f(e.data.articles)),o<e.data.totalResults/15?h.observe(s.wrapper.lastElementChild):M()}catch{}finally{l()}}async function A(){S(),m();try{const e=await R();s.wrapper.innerHTML=f(e.data.articles),L(e.data.totalResults),o<e.data.totalResults/15&&h.observe(s.wrapper.lastElementChild)}catch{b()}finally{l()}}
//# sourceMappingURL=commonHelpers.js.map
