{"version":3,"file":"commonHelpers.js","sources":["../src/js/API-request.js","../src/js/refs.js","../src/js/createMarkup.js","../src/js/spinners.js","../src/js/izitoasts.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function getData(q, page) {\n  return axios.get('https://newsapi.org/v2/everything', {\n    params: {\n      apiKey: '31d73c075bf1480facfc72f704139b7b',\n      q,\n      searchIn: 'content',\n      sortBy: 'relevancy',\n      pageSize: 15,\n      page,\n    },\n  });\n}\n","export function getRefs() {\n  return {\n    form: document.querySelector('.js-search-form'),\n    wrapper: document.querySelector('.js-wrapper'),\n    loader: document.querySelector('.js-loader'),\n  };\n}\n","export function createMarkup(array) {\n  return array\n    .map(\n      article =>\n        `\n      <li class=\"list-item\">\n        <a class=\"list-item-link\" href=\"${article.url}\">\n          <img class=\"list-item-img\" src=\"${article.urlToImage}\" alt=\"${article.title}\" width=\"360\" height=\"200\" loading=\"lazy\"\">\n          <div>\n          <h3 class=\"list-item-title\">${article.title}</h3>\n          <p class=\"list-item-text\">${article.description}</p>\n          </div>\n          <div class=\"author-block\">\n            <p class=\"list-item-author\">Author: ${article.source.name}</p>\n          </div>\n        </a>\n      </li>\n        `\n    )\n    .join('');\n}\n","import { Spinner } from 'spin.js';\nimport { getRefs } from './refs';\n\nconst refs = getRefs();\nconst opts = {\n  lines: 18, // The number of lines to draw\n  length: 13, // The length of each line\n  width: 22, // The line thickness\n  radius: 0, // The radius of the inner circle\n  scale: 1, // Scales overall size of the spinner\n  corners: 0.5, // Corner roundness (0..1)\n  speed: 1, // Rounds per second\n  rotate: 90, // The rotation offset\n  animation: 'spinner-line-shrink', // The CSS animation name for the lines\n  direction: 1, // 1: clockwise, -1: counterclockwise\n  color: '#59cf86', // CSS color or array of colors\n  fadeColor: 'transparent', // CSS color or array of colors\n  top: '48%', // Top position relative to parent\n  left: '48%', // Left position relative to parent\n  shadow: '0 0 1px transparent', // Box-shadow for the lines\n  zIndex: 2000000000, // The z-index (defaults to 2e9)\n  className: 'spinner', // The CSS class to assign to the spinner\n  position: 'absolute', // Element positioning\n};\nconst spinner = new Spinner(opts);\n\nexport function spinnerPlay() {\n  spinner.spin(refs.loader);\n  refs.loader.classList.remove('is-hidden');\n}\nexport function spinnerStop() {\n  spinner.stop();\n  refs.loader.classList.add('is-hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function warningAlert() {\n  iziToast.warning({\n    title: 'Warning',\n    message: 'Write request',\n    position: 'center',\n  });\n}\n\nexport function errorAlert() {\n  iziToast.error({\n    title: 'Error',\n    message: 'Server error',\n    position: 'center',\n  });\n}\n\nexport function infoAlert(number) {\n  iziToast.info({\n    title: 'Hello',\n    message: `We have found ${number} results`,\n    position: 'topRight',\n  });\n}\n","import { getData } from './js/API-request';\nimport { getRefs } from './js/refs';\nimport { createMarkup } from './js/createMarkup';\nimport { spinnerPlay, spinnerStop } from './js/spinners';\nimport { warningAlert, errorAlert, infoAlert } from './js/izitoasts';\n\nconst refs = getRefs();\nlet q = null;\nlet page = 1;\nconst options = {\n  root: null,\n  rootMargin: '100px',\n  threshold: 1.0,\n};\nconst callback = function (entries, observer) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      observer.unobserve(entry.target);\n      loadMoreData();\n    }\n  });\n};\n\nconst observer = new IntersectionObserver(callback, options);\n\nrefs.form.addEventListener('submit', onSearch);\n\nasync function onSearch(e) {\n  e.preventDefault();\n  q = e.currentTarget.elements.delay.value.trim();\n  spinnerPlay();\n  if (!q) {\n    spinnerStop();\n    refs.wrapper.innerHTML = '';\n    return warningAlert();\n  }\n  try {\n    const response = await getData(q);\n    refs.wrapper.innerHTML = createMarkup(response.data.articles);\n    infoAlert(response.data.totalResults);\n    const item = refs.wrapper.lastElementChild;\n    observer.observe(item);\n  } catch (error) {\n    errorAlert();\n  } finally {\n    spinnerStop();\n  }\n  e.target.reset();\n}\nexport async function loadMoreData() {\n  page += 1;\n  spinnerPlay();\n  try {\n    const response = await getData(q, page);\n    refs.wrapper.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(response.data.articles)\n    );\n    const item = document.querySelector('.list-item:last-child');\n    observer.observe(item);\n  } catch (error) {\n  } finally {\n    spinnerStop();\n  }\n}\n"],"names":["getData","q","page","axios","getRefs","createMarkup","array","article","refs","opts","spinner","Spinner","spinnerPlay","spinnerStop","warningAlert","iziToast","errorAlert","infoAlert","number","options","callback","entries","observer","entry","loadMoreData","onSearch","e","response","item"],"mappings":"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"}